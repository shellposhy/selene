$(document).ready(function(){var current_theme=$.cookie("current_theme")==null?"cerulean":$.cookie("current_theme");switch_theme(current_theme);$('#themes a[data-value="'+current_theme+'"]').find("i").addClass("icon-ok");$("#themes a").click(function(e){e.preventDefault();current_theme=$(this).attr("data-value");$.cookie("current_theme",current_theme,{expires:365});switch_theme(current_theme);$("#themes i").removeClass("icon-ok");$(this).find("i").addClass("icon-ok")});function switch_theme(theme_name){$("#bs-css").attr("href",appPath+"/admin/css/bootstrap-"+theme_name+".css")}$("#is-ajax").click(function(e){$.cookie("is-ajax",$(this).prop("checked"),{expires:365})});$("#is-ajax").prop("checked",$.cookie("is-ajax")==="true"?true:false);if($.browser.msie){$("#is-ajax").prop("checked",false);$("#for-is-ajax").hide();$("#toggle-fullscreen").hide();$(".login-box").find(".input-large").removeClass("span10")}$("ul.main-menu li a").each(function(){if($($(this))[0].href==String(window.location)){$(this).parent().addClass("active")}});$("ul.main-menu li:not(.nav-header)").hover(function(){$(this).animate({"margin-left":"+=5"},300)},function(){$(this).animate({"margin-left":"-=5"},300)});docReady()});function docReady(){$('a[href="#"][data-top!=true]').click(function(e){e.preventDefault()});var spinner=$(".spinner").spinner();$.datepicker.setDefaults($.datepicker.regional["zh-CN"]);$(".datepicker").datepicker();timepickerReady();$(".noty").click(function(e){e.preventDefault();var options=$.parseJSON($(this).attr("data-noty-options"));noty(options)});$("input:checkbox, input:radio").not('[data-no-uniform="true"],.no_uniform input, #uniform-is-ajax, .ui-multiselect-menu input').each(function(){if($(this).parents(".checker").length==0){$(this).uniform()}});$("input:file").uniform({fileDefaultText:"请选择文件",fileBtnText:"浏览"});$('[data-rel="chosen"],[rel="chosen"]').chosen({no_results_text:"没有匹配结果"});$(".multiSelect").multiselect();$("#myTab a:first").tab("show");$("#myTab a").click(function(e){e.preventDefault();$(this).tab("show")});$(".sortable").sortable({revert:true,cancel:".btn,.box-content,.nav-header",update:function(event,ui){}});$(".slider").slider({range:true,values:[10,65]});$('[rel="tooltip"],[data-rel="tooltip"]').tooltip({"placement":"bottom",delay:{show:400,hide:200}});$("textarea.autogrow").autogrow();$('[rel="popover"],[data-rel="popover"]').popover();$(".iphone-toggle").iphoneStyle({checkedLabel:"启用",uncheckedLabel:"禁用"});$("ul.gallery li").hover(function(){$("img",this).fadeToggle(1000);$(this).find(".gallery-controls").remove();$(this).append('<div class="well gallery-controls">'+'<p><a href="#" class="gallery-edit btn"><i class="icon-edit"></i></a> <a href="#" class="gallery-delete btn"><i class="icon-remove"></i></a></p>'+"</div>");$(this).find(".gallery-controls").stop().animate({"margin-top":"-1"},400,"easeInQuint")},function(){$("img",this).fadeToggle(1000);$(this).find(".gallery-controls").stop().animate({"margin-top":"-30"},200,"easeInQuint",function(){$(this).remove()})});$(".thumbnails").on("click",".gallery-delete",function(e){e.preventDefault();$(this).parents(".thumbnail").fadeOut()});$(".thumbnails").on("click",".gallery-edit",function(e){e.preventDefault()});$(".thumbnail a").colorbox({rel:"thumbnail a",transition:"elastic",maxWidth:"95%",maxHeight:"95%"});$("#toggle-fullscreen").button().click(function(){var button=$(this),root=document.documentElement;if(!button.hasClass("active")){$("#thumbnails").addClass("modal-fullscreen");if(root.webkitRequestFullScreen){root.webkitRequestFullScreen(window.Element.ALLOW_KEYBOARD_INPUT)}else{if(root.mozRequestFullScreen){root.mozRequestFullScreen()}}}else{$("#thumbnails").removeClass("modal-fullscreen");(document.webkitCancelFullScreen||document.mozCancelFullScreen||$.noop).apply(document)}});if($(".tour").length&&typeof(tour)=="undefined"){var tour=new Tour();tour.addStep({element:".span10:first",placement:"top",title:"Custom Tour",content:"You can create tour like this. Click Next."});tour.addStep({element:".theme-container",placement:"left",title:"Themes",content:"You change your theme from here."});tour.addStep({element:"ul.main-menu a:first",title:"Dashboard",content:"This is your dashboard from here you will find highlights."});tour.addStep({element:"#for-is-ajax",title:"Ajax",content:"You can change if pages load with Ajax or not."});tour.addStep({element:".top-nav a:first",placement:"bottom",title:"Visit Site",content:"Visit your front end from here."});tour.restart()}$(".btn-close").click(function(e){e.preventDefault();$(this).parent().parent().parent().fadeOut()});$(".btn-minimize").click(function(e){e.preventDefault();var $target=$(this).parent().parent().next(".box-content");if($target.is(":visible")){$("i",$(this)).removeClass("icon-chevron-up").addClass("icon-chevron-down")}else{$("i",$(this)).removeClass("icon-chevron-down").addClass("icon-chevron-up")}$target.slideToggle()});$(".btn-setting").click(function(e){e.preventDefault();$("#myModal").modal("show")});$("#external-events div.external-event").each(function(){var eventObject={title:$.trim($(this).text())};$(this).data("eventObject",eventObject);$(this).draggable({zIndex:999,revert:true,revertDuration:0})});$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},editable:true,droppable:true,drop:function(date,allDay){var originalEventObject=$(this).data("eventObject");var copiedEventObject=$.extend({},originalEventObject);copiedEventObject.start=date;copiedEventObject.allDay=allDay;$("#calendar").fullCalendar("renderEvent",copiedEventObject,true);if($("#drop-remove").is(":checked")){$(this).remove()}}});if($("#sincos").length){var sin=[],cos=[];for(var i=0;i<14;i+=0.5){sin.push([i,Math.sin(i)/i]);cos.push([i,Math.cos(i)])}var plot=$.plot($("#sincos"),[{data:sin,label:"sin(x)/x"},{data:cos,label:"cos(x)"}],{series:{lines:{show:true},points:{show:true}},grid:{hoverable:true,clickable:true,backgroundColor:{colors:["#fff","#eee"]}},yaxis:{min:-1.2,max:1.2},colors:["#539F2E","#3C67A5"]});function showTooltip(x,y,contents){$('<div id="tooltip">'+contents+"</div>").css({position:"absolute",display:"none",top:y+5,left:x+5,border:"1px solid #fdd",padding:"2px","background-color":"#dfeffc",opacity:0.8}).appendTo("body").fadeIn(200)}var previousPoint=null;$("#sincos").bind("plothover",function(event,pos,item){$("#x").text(pos.x.toFixed(2));$("#y").text(pos.y.toFixed(2));if(item){if(previousPoint!=item.dataIndex){previousPoint=item.dataIndex;$("#tooltip").remove();var x=item.datapoint[0].toFixed(2),y=item.datapoint[1].toFixed(2);showTooltip(item.pageX,item.pageY,item.series.label+" of "+x+" = "+y)}}else{$("#tooltip").remove();previousPoint=null}});$("#sincos").bind("plotclick",function(event,pos,item){if(item){$("#clickdata").text("You clicked point "+item.dataIndex+" in "+item.series.label+".");plot.highlight(item.series,item.datapoint)}})}if($("#flotchart").length){var d1=[];for(var i=0;i<Math.PI*2;i+=0.25){d1.push([i,Math.sin(i)])}var d2=[];for(var i=0;i<Math.PI*2;i+=0.25){d2.push([i,Math.cos(i)])}var d3=[];for(var i=0;i<Math.PI*2;i+=0.1){d3.push([i,Math.tan(i)])}$.plot($("#flotchart"),[{label:"sin(x)",data:d1},{label:"cos(x)",data:d2},{label:"tan(x)",data:d3}],{series:{lines:{show:true},points:{show:true}},xaxis:{ticks:[0,[Math.PI/2,"\u03c0/2"],[Math.PI,"\u03c0"],[Math.PI*3/2,"3\u03c0/2"],[Math.PI*2,"2\u03c0"]]},yaxis:{ticks:10,min:-2,max:2},grid:{backgroundColor:{colors:["#fff","#eee"]}}})}if($("#stackchart").length){var d1=[];for(var i=0;i<=10;i+=1){d1.push([i,parseInt(Math.random()*30)])}var d2=[];for(var i=0;i<=10;i+=1){d2.push([i,parseInt(Math.random()*30)])}var d3=[];for(var i=0;i<=10;i+=1){d3.push([i,parseInt(Math.random()*30)])}var stack=0,bars=true,lines=false,steps=false;function plotWithOptions(){$.plot($("#stackchart"),[d1,d2,d3],{series:{stack:stack,lines:{show:lines,fill:true,steps:steps},bars:{show:bars,barWidth:0.6}}})}plotWithOptions();$(".stackControls input").click(function(e){e.preventDefault();stack=$(this).val()=="With stacking"?true:null;plotWithOptions()});$(".graphControls input").click(function(e){e.preventDefault();bars=$(this).val().indexOf("Bars")!=-1;lines=$(this).val().indexOf("Lines")!=-1;steps=$(this).val().indexOf("steps")!=-1;plotWithOptions()})}var data=[{label:"Internet Explorer",data:12},{label:"Mobile",data:27},{label:"Safari",data:85},{label:"Opera",data:64},{label:"Firefox",data:90},{label:"Chrome",data:112}];if($("#piechart").length){$.plot($("#piechart"),data,{series:{pie:{show:true}},grid:{hoverable:true,clickable:true},legend:{show:false}});function pieHover(event,pos,obj){if(!obj){return}percent=parseFloat(obj.series.percent).toFixed(2);$("#hover").html('<span style="font-weight: bold; color: '+obj.series.color+'">'+obj.series.label+" ("+percent+"%)</span>")}$("#piechart").bind("plothover",pieHover)}if($("#donutchart").length){$.plot($("#donutchart"),data,{series:{pie:{innerRadius:0.5,show:true}},legend:{show:false}})}var data=[],totalPoints=300;function getRandomData(){if(data.length>0){data=data.slice(1)}while(data.length<totalPoints){var prev=data.length>0?data[data.length-1]:50;var y=prev+Math.random()*10-5;if(y<0){y=0}if(y>100){y=100}data.push(y)}var res=[];for(var i=0;i<data.length;++i){res.push([i,data[i]])}return res}var updateInterval=30;$("#updateInterval").val(updateInterval).change(function(){var v=$(this).val();if(v&&!isNaN(+v)){updateInterval=+v;if(updateInterval<1){updateInterval=1}if(updateInterval>2000){updateInterval=2000}$(this).val(""+updateInterval)}});if($("#realtimechart").length){var options={series:{shadowSize:1},yaxis:{min:0,max:100},xaxis:{show:false}};var plot=$.plot($("#realtimechart"),[getRandomData()],options);function update(){plot.setData([getRandomData()]);plot.draw();setTimeout(update,updateInterval)}update()}$(".datatable").dataTable({"sDom":"<'row-fluid'<'span6'i><'span6 alignr'f>r>t<'row-fluid'<'span12 center'p>>","sPaginationType":"bootstrap","oLanguage":{"sLengthMenu":"显示 _MENU_ 条记录","sSearch":"搜索","sZeroRecords":"没有检索到数据","sInfo":"当前数据为从 _START_ 到 _END_ 条数据；总共有 _TOTAL_ 条记录","sInfoEmpty":"没有数据","sInfoThousands":"","sProcessing":"正在加载数据......","sInfoFiltered":"(过滤自 _MAX_ 条记录)","oPaginate":{"sFirst":"首页","sPrevious":" 上一页 ","sNext":" 下一页 ","sLast":" 尾页 "}}})}$.fn.dataTableExt.oApi.fnPagingInfo=function(oSettings){return{"iStart":oSettings._iDisplayStart,"iEnd":oSettings.fnDisplayEnd(),"iLength":oSettings._iDisplayLength,"iTotal":oSettings.fnRecordsTotal(),"iFilteredTotal":oSettings.fnRecordsDisplay(),"iPage":Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength),"iTotalPages":Math.ceil(oSettings.fnRecordsDisplay()/oSettings._iDisplayLength)}};$.extend($.fn.dataTableExt.oPagination,{"bootstrap":{"fnInit":function(oSettings,nPaging,fnDraw){var oLang=oSettings.oLanguage.oPaginate;var fnClickHandler=function(e){e.preventDefault();if(oSettings.oApi._fnPageChange(oSettings,e.data.action)){fnDraw(oSettings)}};$(nPaging).addClass("pagination").append("<ul>"+'<li class="prev disabled"><a href="#">&larr; '+oLang.sPrevious+"</a></li>"+'<li class="next disabled"><a href="#">'+oLang.sNext+" &rarr; </a></li>"+"</ul>");var els=$("a",nPaging);$(els[0]).bind("click.DT",{action:"previous"},fnClickHandler);$(els[1]).bind("click.DT",{action:"next"},fnClickHandler)},"fnUpdate":function(oSettings,fnDraw){var iListLength=5;var oPaging=oSettings.oInstance.fnPagingInfo();var an=oSettings.aanFeatures.p;var i,j,sClass,iStart,iEnd,iHalf=Math.floor(iListLength/2);if(oPaging.iTotalPages<iListLength){iStart=1;iEnd=oPaging.iTotalPages}else{if(oPaging.iPage<=iHalf){iStart=1;iEnd=iListLength}else{if(oPaging.iPage>=(oPaging.iTotalPages-iHalf)){iStart=oPaging.iTotalPages-iListLength+1;iEnd=oPaging.iTotalPages}else{iStart=oPaging.iPage-iHalf+1;iEnd=iStart+iListLength-1}}}for(i=0,iLen=an.length;i<iLen;i++){$("li:gt(0)",an[i]).filter(":not(:last)").remove();for(j=iStart;j<=iEnd;j++){sClass=(j==oPaging.iPage+1)?'class="active"':"";$("<li "+sClass+'><a href="#">'+j+"</a></li>").insertBefore($("li:last",an[i])[0]).bind("click",function(e){e.preventDefault();oSettings._iDisplayStart=(parseInt($("a",this).text(),10)-1)*oPaging.iLength;fnDraw(oSettings)})}if(oPaging.iPage===0){$("li:first",an[i]).addClass("disabled")}else{$("li:first",an[i]).removeClass("disabled")}if(oPaging.iPage===oPaging.iTotalPages-1||oPaging.iTotalPages===0){$("li:last",an[i]).addClass("disabled")}else{$("li:last",an[i]).removeClass("disabled")}}}}});$.datepicker.regional["zh-CN"]={clearText:"清除",clearStatus:"清除已选日期",closeText:"关闭",closeStatus:"不改变当前选择",prevText:"&lt;上月",prevStatus:"显示上月",nextText:"下月&gt;",nextStatus:"显示下月",currentText:"今天",currentStatus:"显示本月",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],monthStatus:"选择月份",yearStatus:"选择年份",weekHeader:"周",weekStatus:"年内周次",dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],dayStatus:"设置 DD 为一周起始",dateStatus:"选择 m月 d日, DD",dateFormat:"yy-mm-dd",firstDay:1,initStatus:"请选择日期",isRTL:false};function timepickerReady(){$(".timepicker").click(function(){$("div.content_wrap").css("z-index",1000);$("div .ui-datepicker").css("z-index",1000)});$(".timepicker").datetimepicker({closeText:"确定",showSecond:true,timeFormat:"hh:mm:ss",stepHour:1,stepMinute:1,stepSecond:1})};